/*! jquery.imposeFormat 1.0.0 | (c) 2013 Andrew Duthie | MIT License */
!function(a,b,c){var d=b.ImposeFormat=function(b,c){switch(this.el=b,this.$el=a(b),this.settings=a.extend({},d.defaults,c),this.$el.prop("tagName")){case"FORM":this.$inputs=this.discoverInputs();break;case"INPUT":case"TEXTAREA":this.$inputs=this.$el}this.$inputs.length&&(this.defineHandler(),this.bindInputEvents(),this.settings.triggerImmediately&&this.$inputs.trigger("change.imposeFormat"))};d.defaults={patterns:{time:{search:/^(0\d|1[0-2]|\d):?([0-5]\d)[ ]*(AM?|PM?)$/i,replacement:"[0$1]{-2}:[0$2]{-2} [$3M]{2U}"},date:{search:/^(\d|0\d|1[012])[\-\/](\d|0\d|[12]\d|3[01])[\-\/]((19|20)?\d{2})$/,replacement:"[0$1]{-2}/[0$2]{-2}/[20$3]{-4}"},creditcard:{search:/^(\d{4})[\- ]?(\d{4})[\- ]?(\d{4})[\- ]?(\d{4})$/,replacement:"[$1][$2][$3][$4]"},phone:{search:/^\(?(\d{3})[\) \-\.]*(\d{3})[ \-\.]*(\d{4})$/,replacement:"[$1]-[$2]-[$3]"}},regex:{replacementPieces:/\[([^\]]*)\$(\d+)([^\]]*)\](\{(\-?\d+)?([A-Za-z]*)\})?/gi},flags:{U:String.prototype.toUpperCase,L:String.prototype.toLowerCase},type:c,pattern:c,triggerImmediately:!0,callback:a.noop},d.prototype.discoverInputs=function(){return this.$el.find(":input")},d.prototype.defineHandler=function(){var b=this;this.$inputs.each(function(){var c=a(this),d=b.settings.pattern||b.getHandlerPattern(c);return d?(c.data("imposeSearch",d.search).data("imposeReplace",d.replacement),!0):!1})},d.prototype.getHandlerPattern=function(a){var b=this.settings.patterns;if(a.is("[data-impose-search][data-impose-replace]"))return{search:e.stringToRegExp(a.data("imposeSearch")),replacement:a.data("imposeReplace")};var c;if((c=a.data("impose"))&&c in b)return b[c];var d=this.settings.type;return d&&d in b?b[d]:void 0},d.prototype.bindInputEvents=function(){var b=this;this.$inputs.filter(function(){var b=a(this);return b.data("imposeSearch")&&b.data("imposeReplace")}).on("change.imposeFormat",function(){var a=[this].concat(Array.prototype.slice.apply(arguments));b.handleChange.apply(b,a)})},d.prototype.handleChange=function(b){var c=a(b),d=c.val(),e=c.data("imposeSearch"),f=c.data("imposeReplace"),g=this;if(d.replace(/\s/g,"").length){var h=d.match(e);h&&(f=f.replace(this.settings.regex.replacementPieces,function(a,b,c,d,e,f,i){var j=b+h[c]+d;return f&&(f=+f,j=String.prototype.slice.apply(j,f>=0?[0,f]:[f])),i?g.augmentText(j,i):j}),c.val(f),this.settings.callback.call(b))}},d.prototype.augmentText=function(a,b){for(var d=b.split(""),e=0,f=d.length;f>e;e++){var g=d[e],h=this.settings.flags[g];h!==c&&(a=h.call(a,a))}return a};var e={stringToRegExp:function(a){var b=a.match(/^\/(.+)\/([gimy]*)$/);return b?new RegExp(b[1],b[2]):new RegExp(a)}},f="imposeFormat";a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new d(this,b))})}}(this.jQuery||this.Zepto,this);